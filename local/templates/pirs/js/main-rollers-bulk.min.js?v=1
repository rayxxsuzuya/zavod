$(document).ready(function(){$(document).on("click",".block-header-facts__menu__arrow",function(c){var b=$(".block-header-facts");b.slick("slickNext");
});var a=$(".block-construction-block__slides");$(a).on("afterChange",function(c,b,d){$(".block-construction__round_active").removeClass("block-construction__round_active");
$(".block-construction__round").eq(d).addClass("block-construction__round_active");});$(".i-numeric").inputFilter(function(b){return/^\d*$/.test(b);});
$(".i-city").inputFilter(function(b){return/^([^0-9\<\>\!\,]*)$/.test(b);});$(document).on("click",".form-calc-roller",function(b){if($(this).hasClass("form-calc-roller_active")){console.log(b.target);
if(!$(b.target).hasClass("form-calc-roller-field__input")&&!$(b.target).hasClass("form-calc-roller-field__label")&&!$(b.target).hasClass("form-calc-roller-field__placeholder")&&!$(b.target).hasClass("form-calc-roller-field")&&!$(b.target).hasClass("form-calc-roller__fields")){$(this).removeClass("form-calc-roller_active");
$(".form-calc-list__row").eq($(this).index()).removeClass("form-calc-list__row_active");if(!$(".form-calc-roller_active").length){$(".form-calc-controls").addClass("form-calc-controls_ia");
}}}else{$(this).addClass("form-calc-roller_active");$(".form-calc-list__row").eq($(this).index()).addClass("form-calc-list__row_active");$(".form-calc-controls").removeClass("form-calc-controls_ia");
}});$(document).on("blur",".form-calc-roller-field__input",function(b){if($(this).val()==""){$(this).val("1");}$(".form-calc-list__row").eq($(this).parents(".form-calc-roller").index()).find(".form-calc-list__cell_num .form-calc-list__text span").text($(this).parents(".form-calc-roller").find(".form-calc-roller-field__input_num").val());
$(".form-calc-list__row").eq($(this).parents(".form-calc-roller").index()).find(".form-calc-list__cell_diameter .form-calc-list__text span").text($(this).parents(".form-calc-roller").find(".form-calc-roller-field__input_diameter").val());
$(".form-calc-list__row").eq($(this).parents(".form-calc-roller").index()).find(".form-calc-list__cell_length .form-calc-list__text span").text($(this).parents(".form-calc-roller").find(".form-calc-roller-field__input_length").val());
});$(document).on("click",".form-calc-controls__next",function(d){var b=($(".form-calc__slide_active").next().length?$(".form-calc__slide_active").next():false);
if(b){$(".form-calc__slide_active").removeClass("form-calc__slide_active");$(b).addClass("form-calc__slide_active");$(".form-calc-menu-item_active").removeClass("form-calc-menu-item_active");
$(".form-calc-menu-item").eq($(b).index()).addClass("form-calc-menu-item_active");$(".form-calc-menu-item").eq($(b).index()).prevAll(".form-calc-menu-item").addClass("form-calc-menu-item_prev");
$(".form-calc-controls__back_hidden").removeClass("form-calc-controls__back_hidden");$(".form-calc__back").removeClass("form-calc__back_hidden");if($(b).index()==2){$(".form-calc-controls__next").addClass("form-calc-controls__next_hidden");
if($(".form-calc-delivery_active").index()==2){$(".form-calc-list__end .calc-delivery").text("Доставка до вашего города"+($(".form-calc-delivery_active .form-calc-delivery__text input").val()!=""?" ("+$(".form-calc-delivery_active .form-calc-delivery__text input").val()+")":""));
}else{$(".form-calc-list__end .calc-delivery").text($(".form-calc-delivery_active .form-calc-delivery__text").text());}var c="";$(".form-calc-list__row_active").each(function(e){c+=$(this).find(".form-calc-list__cell").eq(0).find(".form-calc-list__text").text()+" [кол-во: "+$(this).find(".form-calc-list__cell").eq(1).find(".form-calc-list__text").text()+", диаметр: "+$(this).find(".form-calc-list__cell").eq(2).find(".form-calc-list__text").text()+", длина: "+$(this).find(".form-calc-list__cell").eq(3).find(".form-calc-list__text").text()+"] ";
});$(".orderlist").val(c);$(".orderdelivery").val($(".form-calc-list__end").text());}$(".form-calc__progress span").text(($(b).index()+1));$(".form-calc").removeClass("form-calc_1");
$(".form-calc").removeClass("form-calc_2");$(".form-calc").removeClass("form-calc_3");$(".form-calc").addClass("form-calc_"+($(b).index()+1));}});$(document).on("click",".form-calc-controls__back, .form-calc__back",function(c){var b=($(".form-calc__slide_active").prev().length?$(".form-calc__slide_active").prev():false);
if(b){$(".form-calc__slide_active").removeClass("form-calc__slide_active");$(b).addClass("form-calc__slide_active");$(".form-calc-menu-item_active").removeClass("form-calc-menu-item_active");
$(".form-calc-menu-item").eq($(b).index()).addClass("form-calc-menu-item_active");$(".form-calc-menu-item_prev").removeClass("form-calc-menu-item_prev");
$(".form-calc-menu-item").eq($(b).index()).prevAll(".form-calc-menu-item").addClass("form-calc-menu-item_prev");if($(b).index()==0){$(".form-calc-controls__back").addClass("form-calc-controls__back_hidden");
$(".form-calc__back").addClass("form-calc__back_hidden");}$(".form-calc-controls__next_hidden").removeClass("form-calc-controls__next_hidden");$(".form-calc__progress span").text(($(b).index()+1));
$(".form-calc").removeClass("form-calc_1");$(".form-calc").removeClass("form-calc_2");$(".form-calc").removeClass("form-calc_3");$(".form-calc").addClass("form-calc_"+($(b).index()+1));
}});$("#form-order-fileupload").fileupload({dataType:"json",progressall:function(d,c){var b=parseInt(c.loaded/c.total*100,10);$(".form-calc .form-upload__loader").css("width",b+"%");
},add:function(c,b){$(".form-calc .form-upload").addClass("form-upload_loading");b.submit();},done:function(c,b){console.log(b);if(b.result.files[0]["error"]){alert("Файл слишком большой или не подходящего формата");
$(".form-calc .form-upload__loader").css("width",0+"%");$(".form-calc .form-upload").removeClass("form-upload_loading");$(".form-calc .form-upload__done .form-upload__text span").text("---");
$(".form-calc .fileurl").val("");}else{$(".form-calc .form-upload").removeClass("form-upload_loading");$(".form-calc .form-upload").addClass("form-upload_done");
$(".form-calc .form-upload__done .form-upload__text span").text(b.result.files[0]["name"]);$(".form-calc .fileurl").val(b.result.files[0]["url"]);}}});
$(document).on("click",".form-upload__remove",function(b){$(".form-calc .form-upload__loader").css("width",0+"%");$(".form-calc .form-upload").removeClass("form-upload_loading");
$(".form-calc .form-upload").removeClass("form-upload_done");$(".form-calc .form-upload__done .form-upload__text span").text("---");$(".form-calc .fileurl").val("");
});$(document).on("click",".form-calc-delivery",function(b){if(!$(b.target).hasClass("form-calc-delivery__input")){$(".form-calc-delivery_active").removeClass("form-calc-delivery_active");
$(this).addClass("form-calc-delivery_active");$(".form-calc-delivery input").attr("disabled",true);$(this).find("input").attr("disabled",false);if($(this).find(".form-calc-delivery__input").length){if($(".form-calc-delivery__input").val().length<3){$(".form-calc-controls").addClass("form-calc-controls_ia");
}}else{$(".form-calc-controls").removeClass("form-calc-controls_ia");}}});$(document).on("keyup input blur",".form-calc-delivery__input",function(b){if($(this).val().length>=3){$(".form-calc-controls").removeClass("form-calc-controls_ia");
}else{$(".form-calc-controls").addClass("form-calc-controls_ia");}});$(document).on("click",".menu__link",function(b){$(".l-site_menu").removeClass("l-site_menu");
$(".l-page_menu").removeClass("l-page_menu");});});(function(a){a.fn.inputFilter=function(b){return this.on("input keydown keyup mousedown mouseup select contextmenu drop",function(){if(b(this.value)){this.oldValue=this.value;
this.oldSelectionStart=this.selectionStart;this.oldSelectionEnd=this.selectionEnd;}else{if(this.hasOwnProperty("oldValue")){this.value=this.oldValue;this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd);
}}});};}(jQuery));